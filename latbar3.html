<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrasi Gajayana Track Series - Latihan Lari Bersama</title>
    
    <meta name="description" content="Daftar latihan lari bersama di lintasan atletik Stadion Gajayana Malang. Tingkatkan pace dan stamina Anda. Fasilitas lengkap: refreshment & coaching clinic.">
    <meta name="keywords" content="Lari Malang, Stadion Gajayana, Track Session, Interval Run, Komunitas Lari Malang, Latihan Atletik">
    <meta name="author" content="Gajayana Track Community">
    
    <meta property="og:type" content="website">
    <meta property="og:title" content="Gajayana Track Series - Latihan Bersama">
    <meta property="og:description" content="Upgrade performa lari Anda minggu ini. Slot terbatas!">
    <meta property="og:image" content="https://images.unsplash.com/photo-1461896836934-ffe607ba8211?q=80&w=1200"> <meta property="og:url" content="https://gajayanatrack.id">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SportsEvent",
      "name": "Gajayana Track Session",
      "location": {
        "@type": "Place",
        "name": "Stadion Gajayana",
        "address": "Jl. Tenes, Malang"
      },
      "image": "https://images.unsplash.com/photo-1461896836934-ffe607ba8211",
      "description": "Latihan interval dan endurance di track standar internasional.",
      "offers": {
        "@type": "Offer",
        "price": "15000",
        "priceCurrency": "IDR"
      }
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="YOUR_CLIENT_KEY_HERE"></script>

    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                        display: ['Bebas Neue', 'sans-serif'], // Font Headline Sporty
                    },
                    colors: {
                        sport: {
                            volt: '#CCFF00',   /* Hijau Stabilo / Nike Volt */
                            blue: '#0044FF',   /* Electric Blue */
                            dark: '#0a0a0a',
                            surface: '#121212'
                        }
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0a0a0a; color: white; }
        
        /* Background Atletik */
        .hero-bg {
            /* Gambar Lintasan Lari Profesional */
            background-image: url('https://images.unsplash.com/photo-1532444458054-01a7dd3e9fca?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }
        
        /* Modern Glass Panel (Darker for Day contrast) */
        .glass-dark {
            background: rgba(18, 18, 18, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .text-stroke {
            -webkit-text-stroke: 1px rgba(255,255,255,0.2);
            color: transparent;
        }

        /* Checkbox Custom */
        .checkbox-wrapper input:checked + div {
            background-color: #CCFF00;
            border-color: #CCFF00;
        }
        .checkbox-wrapper input:checked + div svg {
            display: block;
        }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="relative min-h-screen flex flex-col">

        <header class="relative h-[60vh] lg:h-[70vh] hero-bg flex items-center justify-center">
            <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/70 to-transparent"></div>
            
            <div class="relative z-10 text-center px-4 w-full max-w-5xl mx-auto mt-12">
                <div class="inline-flex items-center space-x-2 bg-sport-volt text-black px-3 py-1 font-bold text-sm tracking-widest uppercase mb-4 transform -skew-x-12">
                    <span>Next Session</span>
                </div>
                
                <h1 class="text-6xl md:text-8xl font-display uppercase tracking-wider mb-2 leading-none text-white">
                    Gajayana <span class="text-sport-volt">Track Series</span>
                </h1>
                
                <p class="text-gray-300 text-lg md:text-xl font-light mb-8 max-w-2xl mx-auto">
                    Dorong batas kemampuanmu. Bergabunglah dengan sesi latihan terstruktur di stadion kebanggaan Malang.
                </p>

                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <div class="bg-white/10 backdrop-blur-md border border-white/20 px-4 py-2 min-w-[80px]">
                        <span class="block text-3xl font-display text-sport-volt">{{ timer.days }}</span>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400">Hari</span>
                    </div>
                    <div class="bg-white/10 backdrop-blur-md border border-white/20 px-4 py-2 min-w-[80px]">
                        <span class="block text-3xl font-display text-sport-volt">{{ timer.hours }}</span>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400">Jam</span>
                    </div>
                    <div class="bg-white/10 backdrop-blur-md border border-white/20 px-4 py-2 min-w-[80px]">
                        <span class="block text-3xl font-display text-sport-volt">{{ timer.minutes }}</span>
                        <span class="text-[10px] uppercase tracking-widest text-gray-400">Menit</span>
                    </div>
                </div>

                <button @click="scrollToForm" class="bg-sport-volt hover:bg-white text-black font-bold py-3 px-8 text-lg uppercase tracking-wider transition-all transform hover:-translate-y-1 shadow-[0_0_20px_rgba(204,255,0,0.4)] clip-path-slant">
                    Daftar Sekarang
                </button>
            </div>
        </header>

        <main id="registration-area" class="flex-grow container mx-auto px-4 -mt-20 relative z-20 pb-20">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">

                <div class="lg:col-span-7">
                    <div class="glass-dark p-6 md:p-10 shadow-2xl">
                        <div class="flex items-center justify-between mb-8 border-b border-gray-800 pb-4">
                            <h2 class="text-3xl font-display uppercase text-white">Formulir Pendaftaran</h2>
                            <div class="h-2 w-20 bg-sport-volt"></div>
                        </div>

                        <form @submit.prevent="processPayment" class="space-y-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs uppercase text-gray-500 font-bold mb-1 ml-1">Nama Atlet/Peserta</label>
                                    <input type="text" v-model="form.name" required placeholder="Masukkan nama lengkap"
                                        class="w-full bg-black/40 border border-gray-700 text-white px-4 py-3 focus:outline-none focus:border-sport-volt focus:ring-1 focus:ring-sport-volt transition-colors placeholder-gray-600 font-sans">
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs uppercase text-gray-500 font-bold mb-1 ml-1">WhatsApp</label>
                                        <input type="tel" v-model="form.phone" required placeholder="08..."
                                            class="w-full bg-black/40 border border-gray-700 text-white px-4 py-3 focus:outline-none focus:border-sport-volt focus:ring-1 focus:ring-sport-volt transition-colors placeholder-gray-600">
                                    </div>
                                    <div>
                                        <label class="block text-xs uppercase text-gray-500 font-bold mb-1 ml-1">Email</label>
                                        <input type="email" v-model="form.email" required placeholder="email@domain.com"
                                            class="w-full bg-black/40 border border-gray-700 text-white px-4 py-3 focus:outline-none focus:border-sport-volt focus:ring-1 focus:ring-sport-volt transition-colors placeholder-gray-600">
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gray-900/50 p-6 border border-gray-800 mt-6 relative overflow-hidden">
                                <div class="absolute top-0 right-0 w-20 h-20 bg-sport-volt blur-[60px] opacity-10"></div>
                                
                                <h3 class="font-display text-xl text-white mb-4 tracking-wide">Tiket & Add-ons</h3>
                                
                                <div class="flex justify-between items-center mb-6 p-4 bg-black/40 border-l-4 border-sport-volt">
                                    <div>
                                        <div class="font-bold text-white text-lg">Tiket Latihan</div>
                                        <div class="text-sm text-gray-400">Akses Track, Loker & Coach</div>
                                    </div>
                                    <div class="font-display text-2xl text-sport-volt">Rp 15.000</div>
                                </div>

                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <label class="checkbox-wrapper cursor-pointer flex items-center p-3 border border-gray-700 hover:border-gray-500 transition bg-black/20 group">
                                        <input type="checkbox" v-model="form.addons.juice" class="hidden">
                                        <div class="w-5 h-5 border border-gray-500 mr-3 flex items-center justify-center transition-colors">
                                            <svg class="w-3 h-3 text-black hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                        </div>
                                        <div class="flex-1">
                                            <div class="text-sm font-bold text-gray-300 group-hover:text-white">Jus Buah Sruput</div>
                                            <div class="text-xs text-sport-volt">+ Rp 7.000</div>
                                        </div>
                                    </label>

                                    <label class="checkbox-wrapper cursor-pointer flex items-center p-3 border border-gray-700 hover:border-gray-500 transition bg-black/20 group">
                                        <input type="checkbox" v-model="form.addons.isotonic" class="hidden">
                                        <div class="w-5 h-5 border border-gray-500 mr-3 flex items-center justify-center transition-colors">
                                            <svg class="w-3 h-3 text-black hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                                        </div>
                                        <div class="flex-1">
                                            <div class="text-sm font-bold text-gray-300 group-hover:text-white">Isotonik Water</div>
                                            <div class="text-xs text-sport-volt">+ Rp 3.000</div>
                                        </div>
                                    </label>
                                </div>
                            </div>

                            <div class="flex flex-col md:flex-row items-center justify-between pt-4 gap-4">
                                <div class="text-center md:text-left">
                                    <span class="block text-gray-400 text-xs uppercase">Total Pembayaran</span>
                                    <span class="font-display text-4xl text-white">{{ formattedTotal }}</span>
                                </div>
                                <button type="submit" :disabled="isLoading" 
                                    class="w-full md:w-auto bg-white text-black hover:bg-sport-volt font-bold py-4 px-10 text-lg uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center">
                                    <span v-if="isLoading">Processing...</span>
                                    <span v-else class="flex items-center">
                                        Bayar Sekarang <span class="ml-2">→</span>
                                    </span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="lg:col-span-5">
                    <div class="glass-dark p-6 md:p-10 h-full relative">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-xl font-display uppercase text-white">Daftar Peserta</h3>
                                <p class="text-xs text-gray-400">Bergabung dengan {{ participants.length }} pelari lainnya</p>
                            </div>
                            <div class="bg-gray-800 p-2">
                                <svg class="w-6 h-6 text-sport-volt" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            </div>
                        </div>

                        <div class="overflow-y-auto max-h-[500px] space-y-3 pr-2 custom-scroll">
                            <div v-for="(p, index) in participants" :key="index" 
                                class="flex items-center p-3 bg-white/5 border border-white/5 hover:border-sport-volt/50 transition-colors group">
                                
                                <div class="w-10 h-10 flex-shrink-0 bg-gray-800 text-sport-volt font-bold font-display text-lg flex items-center justify-center border border-gray-600 group-hover:bg-sport-volt group-hover:text-black transition-colors">
                                    {{ getInitials(p.name) }}
                                </div>
                                
                                <div class="ml-4">
                                    <div class="text-sm font-bold text-gray-200 group-hover:text-white">{{ p.name }}</div>
                                    <div class="text-[10px] text-gray-500 uppercase tracking-wider">Ready to Run</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-[#121212] to-transparent pointer-events-none">
                            <div class="text-center text-xs text-gray-500">
                                Data diupdate secara real-time
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>

        <footer class="bg-black py-8 text-center border-t border-gray-900">
            <p class="text-gray-500 text-sm">© 2024 Gajayana Track Series. Supported by Disporapar Kota Malang.</p>
        </footer>

    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        createApp({
            setup() {
                // DATA
                const form = ref({
                    name: '',
                    email: '',
                    phone: '',
                    addons: { juice: false, isotonic: false }
                });

                const isLoading = ref(false);
                
                // DATA PESERTA (Dummy)
                const participants = ref([
                    { name: 'Rizky Febian' }, { name: 'Siti Badriah' }, { name: 'Deddy Corbuzier' },
                    { name: 'Agnez Mo' }, { name: 'Iko Uwais' }, { name: 'Joe Taslim' },
                    { name: 'Cinta Laura' }, { name: 'Raffi Ahmad' }, { name: 'Nagita Slavina' },
                    { name: 'Vincent Rompies' }, { name: 'Desta Mahendra' }
                ]);

                // COUNTDOWN
                const timer = ref({ days: 0, hours: 0, minutes: 0 });
                
                // PRICING
                const prices = { base: 15000, juice: 7000, isotonic: 3000 };

                // COMPUTED
                const rawTotal = computed(() => {
                    let t = prices.base;
                    if (form.value.addons.juice) t += prices.juice;
                    if (form.value.addons.isotonic) t += prices.isotonic;
                    return t;
                });

                const formattedTotal = computed(() => {
                    return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(rawTotal.value);
                });

                // METHODS
                const getInitials = (name) => {
                    return name.split(' ').map(n => n[0]).slice(0, 2).join('').toUpperCase();
                };

                const scrollToForm = () => {
                    document.getElementById('registration-area').scrollIntoView({ behavior: 'smooth' });
                };

                const startTimer = () => {
                    const eventDate = new Date();
                    eventDate.setDate(eventDate.getDate() + 3); // Event 3 hari lagi
                    
                    setInterval(() => {
                        const now = new Date().getTime();
                        const dist = eventDate.getTime() - now;
                        timer.value.days = Math.floor(dist / (1000 * 60 * 60 * 24));
                        timer.value.hours = Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        timer.value.minutes = Math.floor((dist % (1000 * 60 * 60)) / (1000 * 60));
                    }, 1000);
                };

                const processPayment = async () => {
                    isLoading.value = true;
                    try {
                        // --- INTEGRASI MIDTRANS ---
                        // Langkah 1: Kirim data form ke Backend Anda
                        // const response = await fetch('/api/transaction', { method: 'POST', body: JSON.stringify(...) });
                        // const { token } = await response.json();
                        
                        // MOCKUP PROCESS
                        console.log("Processing Payment for:", form.value.name, "Total:", rawTotal.value);
                        await new Promise(resolve => setTimeout(resolve, 2000)); // Simulasi loading

                        // Langkah 2: Panggil Snap (Perlu Token Asli dari Backend)
                        alert("Sistem Pembayaran Siap! (Perlu integrasi backend untuk Snap Token). Total tagihan: " + formattedTotal.value);
                        
                        // window.snap.pay(token, { ... }); 

                    } catch (error) {
                        alert("Terjadi kesalahan.");
                    } finally {
                        isLoading.value = false;
                    }
                };

                onMounted(() => {
                    startTimer();
                });

                return {
                    form, participants, timer, isLoading,
                    formattedTotal, getInitials, scrollToForm, processPayment
                };
            }
        }).mount('#app');
    </script>
</body>
</html>